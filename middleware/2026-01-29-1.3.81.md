---
authors: poscreator
slug: middleware/1.3.81
tags: [Middleware, Belgium, Germany, Greece, Spain, Portugal]
---

# Middleware 1.3.81
[![Static Badge](https://img.shields.io/badge/milestone-v1.3.81-green?logo=github)](https://github.com/fiskaltrust/middleware/milestone/13)

This release brings important bug fixes and enhancements for the German and Greek markets.
The focus is on improving reliability, compliance, and communication with fiscal service providers.
<!--truncate-->

:::info

Customers in Austria and France should continue to use version 1.2.
We are currently testing a unified version for all markets.

:::

## ðŸ‡©ðŸ‡ª Bug Fix: SwissbitCloudV2 Certificate Validation Error ([fiskaltrust/middleware#615](https://github.com/fiskaltrust/middleware/pull/615))

Fixed an issue with certificate validation in the SwissbitCloudV2 SCU where the certificate chain was being incorrectly encoded as Base64.
The certificates are now properly returned in their original Base64 format, resolving validation errors that could occur when verifying TSE certificates.

### Affected packages:
- _fiskaltrust.Middleware.SCU.DE.SwissbitCloudV2_

## ðŸ‡¬ðŸ‡· Bug Fix: Retail credit notes now properly link to original receipts ([fiskaltrust/middleware#601](https://github.com/fiskaltrust/middleware/pull/601))

Fixed an issue where refunds of POS Receipts were not linked to the original documents they referenced.
When issuing a refund for a pos receipt and providing a reference to the original receipt, the system now properly correlates the documents using the `multipleConnectedMarks` field as required by Greek MyDATA regulations.
This ensures that refunds for posreceipts are correctly associated with their original transactions, improving compliance and data accuracy in your fiscal reporting.


### Affected packages:
- _fiskaltrust.Middleware.SCU.GR.MyDATA_

## ðŸ‡©ðŸ‡ª Enhancement: Improved Fiskaly API communication handling with Retry-After support ([fiskaltrust/middleware#600](https://github.com/fiskaltrust/middleware/pull/600))

The middleware now properly handles server load situations when communicating with the Fiskaly TSE cloud service.
When Fiskaly's servers are experiencing high load, they can signal the exact wait time needed before retrying a request.
The middleware now respects these wait instructions, resulting in more reliable operations during peak usage periods.
Additionally, the retry mechanism has been enhanced to handle more error scenarios automatically, reducing potential disruptions in your fiscalization workflows.

### Affected packages:
- _fiskaltrust.Middleware.SCU.DE.FiskalyCertified_

## ðŸ‡§ðŸ‡ªðŸ‡¬ðŸ‡·ðŸ‡ªðŸ‡¸ðŸ‡µðŸ‡¹ Bug Fix: Resolved issue with incorrect success states during exception handling ([fiskaltrust/middleware#586](https://github.com/fiskaltrust/middleware/pull/586))

This fix addresses a critical issue where the Middleware incorrectly returned success states when uncaught exceptions occurred during receipt processing.
Previously, when an exception was thrown, the response would fail to properly mark the operation as failed, potentially leading to misleading status information.
With this update, any uncaught exceptions are now properly logged and the receipt response is correctly marked as failed, ensuring accurate status reporting and improved error visibility.

:::info
This only affects the Belgian, Greek, Spanish and Portugese Queues.
:::

### Affected packages:
- _fiskaltrust.Middleware.Queue.AzureTableStorage_
- _fiskaltrust.Middleware.Queue.EF_
- _fiskaltrust.Middleware.Queue.MySQL_
- _fiskaltrust.Middleware.Queue.SQLite_
