---
authors: poscreator
slug: middleware/1.3.78
tags: [Middleware, Germany, Austria, Italy, Denmark, Belgium, Portugal, Greece]
---
# Middleware 1.3.78
[![Static Badge](https://img.shields.io/badge/milestone-v1.3.78-green?logo=github)](https://github.com/fiskaltrust/middleware/milestone/10?closed=1)

In this version of the Middleware, we focused on stability improvements, security updates, and preparatory work for additional European markets.  
This release includes important updates for the **German** and **Austrian** markets, as well as groundwork for **Portugal (PT)**, **Greece (GR)**, **Denmark (DK)**, and **Belgium (BE)**.

Version 1.3 of the Middleware is intended primarily for the **German** and **Italian** markets,  
with ongoing preparation for **Austria**, **Portugal**, **Greece**, **Denmark**, and **Belgium**.  

## ðŸ‡®ðŸ‡¹ Feature: Added Support for Unreferenced Refunds with Epson RT Printers ([fiskaltrust/middleware#515](https://github.com/fiskaltrust/middleware/pull/515))

With this release, weâ€™ve added support for **unreferenced refunds** when using **Epson RT Printer-based SCUs**.  
This enhancement makes it possible to process refunds even when the original receipt reference is unavailable (e.g., when the original document was lost).

While we still recommend using referenced refunds in most scenarios, this feature ensures full refund support across all Italian SCUs.

## ðŸ‡©ðŸ‡ª Fix: Corrected Public Key Handling for SwissbitCloudV2 SCU ([fiskaltrust/middleware#503](https://github.com/fiskaltrust/middleware/pull/503))

We simplified and improved how the **TSE public key** is managed in the SwissbitCloudV2 SCU.  
The public key is now retrieved directly from the TSE response instead of being parsed from the certificate chain, ensuring correct QR code generation and reducing potential parsing errors.

### Affected packages:
- _fiskaltrust.Middleware.SCU.DE.SwissbitCloudV2_

## ðŸ‡©ðŸ‡ª Feature: Improved SCU Switch Validation ([fiskaltrust/middleware#525](https://github.com/fiskaltrust/middleware/pull/525))

We improved the validation logic for **SCU switching** in the `FinishScuSwitchReceiptCommand`.  
The Middleware now verifies that the target SCU ID from the initiation receipt matches the current SCU ID, ensuring consistent and reliable switching â€” and allowing the SCU registration process to be safely repeated when needed.

### Affected packages:
- _fiskaltrust.Middleware.Queue.DE_

## ðŸ‡¦ðŸ‡¹ Feature: Create One Instance of ATSSCDProvider ([fiskaltrust/middleware#539](https://github.com/fiskaltrust/middleware/pull/539))

We refactored the **ATSSCD provider** to ensure only a single shared instance is created and used across the Middleware.  
This change improves initialization logic, thread safety, and asynchronous handling, leading to more reliable and performant SCU operations.

### Affected packages:
- _fiskaltrust.Middleware.Queue.AT_
- _fiskaltrust.Middleware.SCU.AT_

## ðŸ‡¦ðŸ‡¹ Fix: Improved Backup SCU Handling ([fiskaltrust/middleware#483](https://github.com/fiskaltrust/middleware/pull/483))

We refined how **backup Signature Creation Units (SCUs)** are selected and used in the Austrian market.  
The updated logic ensures that normal SCUs are prioritized and that the system reliably falls back to a backup SCU only when necessary, improving overall signing stability and resilience.



